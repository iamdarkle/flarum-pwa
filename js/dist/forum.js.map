{"version":3,"file":"forum.js","mappings":";2BAAA,IAAIA,EAAUC,EAAAA,KAAAA,QACd,SAASC,IACP,aACAC,EAAOC,QAAUF,EAAsB,WACrC,OAAOE,CACT,EAAGD,EAAOC,QAAQC,YAAa,EAAMF,EAAOC,QAAiB,QAAID,EAAOC,QACxE,IAAIA,EAAU,CAAC,EACbE,EAAKC,OAAOC,UACZC,EAASH,EAAGI,eACZC,EAAU,mBAAqBC,OAASA,OAAS,CAAC,EAClDC,EAAiBF,EAAQG,UAAY,aACrCC,EAAsBJ,EAAQK,eAAiB,kBAC/CC,EAAoBN,EAAQO,aAAe,gBAC7C,SAASC,EAAOC,EAAKC,EAAKC,GACxB,OAAOf,OAAOgB,eAAeH,EAAKC,EAAK,CACrCC,MAAOA,EACPE,YAAY,EACZC,cAAc,EACdC,UAAU,IACRN,EAAIC,EACV,CACA,IACEF,EAAO,CAAC,EAAG,GAKb,CAJE,MAAOQ,GACPR,EAAS,SAAgBC,EAAKC,EAAKC,GACjC,OAAOF,EAAIC,GAAOC,CACpB,CACF,CACA,SAASM,EAAKC,EAASC,EAASC,EAAMC,GACpC,IAAIC,EAAiBH,GAAWA,EAAQtB,qBAAqB0B,EAAYJ,EAAUI,EACjFC,EAAY5B,OAAO6B,OAAOH,EAAezB,WACzC6B,EAAU,IAAIC,EAAQN,GAAe,IACvC,OAAOG,EAAUI,QAAU,SAAUV,EAASE,EAAMM,GAClD,IAAIG,EAAQ,iBACZ,OAAO,SAAUC,EAAQC,GACvB,GAAI,cAAgBF,EAAO,MAAM,IAAIG,MAAM,gCAC3C,GAAI,cAAgBH,EAAO,CACzB,GAAI,UAAYC,EAAQ,MAAMC,EAC9B,MA4IC,CACLpB,WAAOsB,EACPC,MAAM,EA7IJ,CACA,IAAKR,EAAQI,OAASA,EAAQJ,EAAQK,IAAMA,IAAO,CACjD,IAAII,EAAWT,EAAQS,SACvB,GAAIA,EAAU,CACZ,IAAIC,EAAiBC,EAAoBF,EAAUT,GACnD,GAAIU,EAAgB,CAClB,GAAIA,IAAmBE,EAAkB,SACzC,OAAOF,CACT,CACF,CACA,GAAI,SAAWV,EAAQI,OAAQJ,EAAQa,KAAOb,EAAQc,MAAQd,EAAQK,SAAS,GAAI,UAAYL,EAAQI,OAAQ,CAC7G,GAAI,mBAAqBD,EAAO,MAAMA,EAAQ,YAAaH,EAAQK,IACnEL,EAAQe,kBAAkBf,EAAQK,IACpC,KAAO,WAAaL,EAAQI,QAAUJ,EAAQgB,OAAO,SAAUhB,EAAQK,KACvEF,EAAQ,YACR,IAAIc,EAASC,EAAS1B,EAASE,EAAMM,GACrC,GAAI,WAAaiB,EAAOE,KAAM,CAC5B,GAAIhB,EAAQH,EAAQQ,KAAO,YAAc,iBAAkBS,EAAOZ,MAAQO,EAAkB,SAC5F,MAAO,CACL3B,MAAOgC,EAAOZ,IACdG,KAAMR,EAAQQ,KAElB,CACA,UAAYS,EAAOE,OAAShB,EAAQ,YAAaH,EAAQI,OAAS,QAASJ,EAAQK,IAAMY,EAAOZ,IAClG,CACF,CACF,CAjC2B,CAiCzBb,EAASE,EAAMM,GAAUF,CAC7B,CACA,SAASoB,EAASE,EAAIrC,EAAKsB,GACzB,IACE,MAAO,CACLc,KAAM,SACNd,IAAKe,EAAGC,KAAKtC,EAAKsB,GAOtB,CALE,MAAOf,GACP,MAAO,CACL6B,KAAM,QACNd,IAAKf,EAET,CACF,CACAvB,EAAQwB,KAAOA,EACf,IAAIqB,EAAmB,CAAC,EACxB,SAASf,IAAa,CACtB,SAASyB,IAAqB,CAC9B,SAASC,IAA8B,CACvC,IAAIC,EAAoB,CAAC,EACzB1C,EAAO0C,EAAmBhD,GAAgB,WACxC,OAAOiD,IACT,IACA,IAAIC,EAAWxD,OAAOyD,eACpBC,EAA0BF,GAAYA,EAASA,EAASG,EAAO,MACjED,GAA2BA,IAA4B3D,GAAMG,EAAOiD,KAAKO,EAAyBpD,KAAoBgD,EAAoBI,GAC1I,IAAIE,EAAKP,EAA2BpD,UAAY0B,EAAU1B,UAAYD,OAAO6B,OAAOyB,GACpF,SAASO,EAAsB5D,GAC7B,CAAC,OAAQ,QAAS,UAAU6D,SAAQ,SAAU5B,GAC5CtB,EAAOX,EAAWiC,GAAQ,SAAUC,GAClC,OAAOoB,KAAKvB,QAAQE,EAAQC,EAC9B,GACF,GACF,CACA,SAAS4B,EAAcnC,EAAWoC,GAChC,SAASC,EAAO/B,EAAQC,EAAK+B,EAASC,GACpC,IAAIpB,EAASC,EAASpB,EAAUM,GAASN,EAAWO,GACpD,GAAI,UAAYY,EAAOE,KAAM,CAC3B,IAAImB,EAASrB,EAAOZ,IAClBpB,EAAQqD,EAAOrD,MACjB,OAAOA,GAAS,UAAYtB,EAAQsB,IAAUb,EAAOiD,KAAKpC,EAAO,WAAaiD,EAAYE,QAAQnD,EAAMsD,SAASC,MAAK,SAAUvD,GAC9HkD,EAAO,OAAQlD,EAAOmD,EAASC,EACjC,IAAG,SAAU/C,GACX6C,EAAO,QAAS7C,EAAK8C,EAASC,EAChC,IAAKH,EAAYE,QAAQnD,GAAOuD,MAAK,SAAUC,GAC7CH,EAAOrD,MAAQwD,EAAWL,EAAQE,EACpC,IAAG,SAAUI,GACX,OAAOP,EAAO,QAASO,EAAON,EAASC,EACzC,GACF,CACAA,EAAOpB,EAAOZ,IAChB,CACA,IAAIsC,EACJlB,KAAKvB,QAAU,SAAUE,EAAQC,GAC/B,SAASuC,IACP,OAAO,IAAIV,GAAY,SAAUE,EAASC,GACxCF,EAAO/B,EAAQC,EAAK+B,EAASC,EAC/B,GACF,CACA,OAAOM,EAAkBA,EAAkBA,EAAgBH,KAAKI,EAA4BA,GAA8BA,GAC5H,CACF,CACA,SAASjC,EAAoBF,EAAUT,GACrC,IAAII,EAASK,EAAShC,SAASuB,EAAQI,QACvC,QAAIG,IAAcH,EAAQ,CACxB,GAAIJ,EAAQS,SAAW,KAAM,UAAYT,EAAQI,OAAQ,CACvD,GAAIK,EAAShC,SAAiB,SAAMuB,EAAQI,OAAS,SAAUJ,EAAQK,SAAME,EAAWI,EAAoBF,EAAUT,GAAU,UAAYA,EAAQI,QAAS,OAAOQ,EACpKZ,EAAQI,OAAS,QAASJ,EAAQK,IAAM,IAAIwC,UAAU,iDACxD,CACA,OAAOjC,CACT,CACA,IAAIK,EAASC,EAASd,EAAQK,EAAShC,SAAUuB,EAAQK,KACzD,GAAI,UAAYY,EAAOE,KAAM,OAAOnB,EAAQI,OAAS,QAASJ,EAAQK,IAAMY,EAAOZ,IAAKL,EAAQS,SAAW,KAAMG,EACjH,IAAIkC,EAAO7B,EAAOZ,IAClB,OAAOyC,EAAOA,EAAKtC,MAAQR,EAAQS,EAASsC,YAAcD,EAAK7D,MAAOe,EAAQgD,KAAOvC,EAASwC,QAAS,WAAajD,EAAQI,SAAWJ,EAAQI,OAAS,OAAQJ,EAAQK,SAAME,GAAYP,EAAQS,SAAW,KAAMG,GAAoBkC,GAAQ9C,EAAQI,OAAS,QAASJ,EAAQK,IAAM,IAAIwC,UAAU,oCAAqC7C,EAAQS,SAAW,KAAMG,EACrW,CACA,SAASsC,EAAaC,GACpB,IAAIC,EAAQ,CACVC,OAAQF,EAAK,IAEf,KAAKA,IAASC,EAAME,SAAWH,EAAK,IAAK,KAAKA,IAASC,EAAMG,WAAaJ,EAAK,GAAIC,EAAMI,SAAWL,EAAK,IAAK1B,KAAKgC,WAAWC,KAAKN,EACrI,CACA,SAASO,EAAcP,GACrB,IAAInC,EAASmC,EAAMQ,YAAc,CAAC,EAClC3C,EAAOE,KAAO,gBAAiBF,EAAOZ,IAAK+C,EAAMQ,WAAa3C,CAChE,CACA,SAAShB,EAAQN,GACf8B,KAAKgC,WAAa,CAAC,CACjBJ,OAAQ,SACN1D,EAAYqC,QAAQkB,EAAczB,MAAOA,KAAKoC,OAAM,EAC1D,CACA,SAAShC,EAAOiC,GACd,GAAIA,EAAU,CACZ,IAAIC,EAAiBD,EAAStF,GAC9B,GAAIuF,EAAgB,OAAOA,EAAe1C,KAAKyC,GAC/C,GAAI,mBAAqBA,EAASd,KAAM,OAAOc,EAC/C,IAAKE,MAAMF,EAASG,QAAS,CAC3B,IAAIC,GAAK,EACPlB,EAAO,SAASA,IACd,OAASkB,EAAIJ,EAASG,QACpB,GAAI7F,EAAOiD,KAAKyC,EAAUI,GAAI,OAAOlB,EAAK/D,MAAQ6E,EAASI,GAAIlB,EAAKxC,MAAO,EAAIwC,EAEjF,OAAOA,EAAK/D,WAAQsB,EAAWyC,EAAKxC,MAAO,EAAIwC,CACjD,EACF,OAAOA,EAAKA,KAAOA,CACrB,CACF,CACA,MAAO,CACLA,KAAMmB,EAEV,CACA,SAASA,IACP,MAAO,CACLlF,WAAOsB,EACPC,MAAM,EAEV,CACA,OAAOc,EAAkBnD,UAAYoD,EAA4BzC,EAAOgD,EAAI,cAAeP,GAA6BzC,EAAOyC,EAA4B,cAAeD,GAAoBA,EAAkB8C,YAActF,EAAOyC,EAA4B3C,EAAmB,qBAAsBb,EAAQsG,oBAAsB,SAAUC,GAChV,IAAIC,EAAO,mBAAqBD,GAAUA,EAAOE,YACjD,QAASD,IAASA,IAASjD,GAAqB,uBAAyBiD,EAAKH,aAAeG,EAAKE,MACpG,EAAG1G,EAAQ2G,KAAO,SAAUJ,GAC1B,OAAOpG,OAAOyG,eAAiBzG,OAAOyG,eAAeL,EAAQ/C,IAA+B+C,EAAOM,UAAYrD,EAA4BzC,EAAOwF,EAAQ1F,EAAmB,sBAAuB0F,EAAOnG,UAAYD,OAAO6B,OAAO+B,GAAKwC,CAC5O,EAAGvG,EAAQ8G,MAAQ,SAAUxE,GAC3B,MAAO,CACLkC,QAASlC,EAEb,EAAG0B,EAAsBE,EAAc9D,WAAYW,EAAOmD,EAAc9D,UAAWO,GAAqB,WACtG,OAAO+C,IACT,IAAI1D,EAAQkE,cAAgBA,EAAelE,EAAQ+G,MAAQ,SAAUtF,EAASC,EAASC,EAAMC,EAAauC,QACxG,IAAWA,IAAgBA,EAAc6C,SACzC,IAAIC,EAAO,IAAI/C,EAAc1C,EAAKC,EAASC,EAASC,EAAMC,GAAcuC,GACxE,OAAOnE,EAAQsG,oBAAoB5E,GAAWuF,EAAOA,EAAKhC,OAAOR,MAAK,SAAUF,GAC9E,OAAOA,EAAO9B,KAAO8B,EAAOrD,MAAQ+F,EAAKhC,MAC3C,GACF,EAAGjB,EAAsBD,GAAKhD,EAAOgD,EAAIlD,EAAmB,aAAcE,EAAOgD,EAAItD,GAAgB,WACnG,OAAOiD,IACT,IAAI3C,EAAOgD,EAAI,YAAY,WACzB,MAAO,oBACT,IAAI/D,EAAQkH,KAAO,SAAUC,GAC3B,IAAID,EAAO,GACX,IAAK,IAAIjG,KAAOkG,EACdD,EAAKvB,KAAK1E,GAEZ,OAAOiG,EAAKE,UAAW,SAASnC,IAC9B,KAAOiC,EAAKhB,QAAS,CACnB,IAAIjF,EAAMiG,EAAKG,MACf,GAAIpG,KAAOkG,EAAQ,OAAOlC,EAAK/D,MAAQD,EAAKgE,EAAKxC,MAAO,EAAIwC,CAC9D,CACA,OAAOA,EAAKxC,MAAO,EAAIwC,CACzB,CACF,EAAGjF,EAAQ8D,OAASA,EAAQ5B,EAAQ9B,UAAY,CAC9CqG,YAAavE,EACb4D,MAAO,SAAewB,GACpB,GAAI5D,KAAK6D,KAAO,EAAG7D,KAAKuB,KAAO,EAAGvB,KAAKZ,KAAOY,KAAKX,WAAQP,EAAWkB,KAAKjB,MAAO,EAAIiB,KAAKhB,SAAW,KAAMgB,KAAKrB,OAAS,OAAQqB,KAAKpB,SAAME,EAAWkB,KAAKgC,WAAWzB,QAAQ2B,IAAiB0B,EAAe,IAAK,IAAIZ,KAAQhD,KAC/N,MAAQgD,EAAKc,OAAO,IAAMnH,EAAOiD,KAAKI,KAAMgD,KAAUT,OAAOS,EAAKe,MAAM,MAAQ/D,KAAKgD,QAAQlE,EAEjG,EACAkF,KAAM,WACJhE,KAAKjB,MAAO,EACZ,IAAIkF,EAAajE,KAAKgC,WAAW,GAAGG,WACpC,GAAI,UAAY8B,EAAWvE,KAAM,MAAMuE,EAAWrF,IAClD,OAAOoB,KAAKkE,IACd,EACA5E,kBAAmB,SAA2B6E,GAC5C,GAAInE,KAAKjB,KAAM,MAAMoF,EACrB,IAAI5F,EAAUyB,KACd,SAASoE,EAAOC,EAAKC,GACnB,OAAO9E,EAAOE,KAAO,QAASF,EAAOZ,IAAMuF,EAAW5F,EAAQgD,KAAO8C,EAAKC,IAAW/F,EAAQI,OAAS,OAAQJ,EAAQK,SAAME,KAAcwF,CAC5I,CACA,IAAK,IAAI7B,EAAIzC,KAAKgC,WAAWQ,OAAS,EAAGC,GAAK,IAAKA,EAAG,CACpD,IAAId,EAAQ3B,KAAKgC,WAAWS,GAC1BjD,EAASmC,EAAMQ,WACjB,GAAI,SAAWR,EAAMC,OAAQ,OAAOwC,EAAO,OAC3C,GAAIzC,EAAMC,QAAU5B,KAAK6D,KAAM,CAC7B,IAAIU,EAAW5H,EAAOiD,KAAK+B,EAAO,YAChC6C,EAAa7H,EAAOiD,KAAK+B,EAAO,cAClC,GAAI4C,GAAYC,EAAY,CAC1B,GAAIxE,KAAK6D,KAAOlC,EAAME,SAAU,OAAOuC,EAAOzC,EAAME,UAAU,GAC9D,GAAI7B,KAAK6D,KAAOlC,EAAMG,WAAY,OAAOsC,EAAOzC,EAAMG,WACxD,MAAO,GAAIyC,GACT,GAAIvE,KAAK6D,KAAOlC,EAAME,SAAU,OAAOuC,EAAOzC,EAAME,UAAU,OACzD,CACL,IAAK2C,EAAY,MAAM,IAAI3F,MAAM,0CACjC,GAAImB,KAAK6D,KAAOlC,EAAMG,WAAY,OAAOsC,EAAOzC,EAAMG,WACxD,CACF,CACF,CACF,EACAvC,OAAQ,SAAgBG,EAAMd,GAC5B,IAAK,IAAI6D,EAAIzC,KAAKgC,WAAWQ,OAAS,EAAGC,GAAK,IAAKA,EAAG,CACpD,IAAId,EAAQ3B,KAAKgC,WAAWS,GAC5B,GAAId,EAAMC,QAAU5B,KAAK6D,MAAQlH,EAAOiD,KAAK+B,EAAO,eAAiB3B,KAAK6D,KAAOlC,EAAMG,WAAY,CACjG,IAAI2C,EAAe9C,EACnB,KACF,CACF,CACA8C,IAAiB,UAAY/E,GAAQ,aAAeA,IAAS+E,EAAa7C,QAAUhD,GAAOA,GAAO6F,EAAa3C,aAAe2C,EAAe,MAC7I,IAAIjF,EAASiF,EAAeA,EAAatC,WAAa,CAAC,EACvD,OAAO3C,EAAOE,KAAOA,EAAMF,EAAOZ,IAAMA,EAAK6F,GAAgBzE,KAAKrB,OAAS,OAAQqB,KAAKuB,KAAOkD,EAAa3C,WAAY3C,GAAoBa,KAAK0E,SAASlF,EAC5J,EACAkF,SAAU,SAAkBlF,EAAQuC,GAClC,GAAI,UAAYvC,EAAOE,KAAM,MAAMF,EAAOZ,IAC1C,MAAO,UAAYY,EAAOE,MAAQ,aAAeF,EAAOE,KAAOM,KAAKuB,KAAO/B,EAAOZ,IAAM,WAAaY,EAAOE,MAAQM,KAAKkE,KAAOlE,KAAKpB,IAAMY,EAAOZ,IAAKoB,KAAKrB,OAAS,SAAUqB,KAAKuB,KAAO,OAAS,WAAa/B,EAAOE,MAAQqC,IAAa/B,KAAKuB,KAAOQ,GAAW5C,CACtQ,EACAwF,OAAQ,SAAgB7C,GACtB,IAAK,IAAIW,EAAIzC,KAAKgC,WAAWQ,OAAS,EAAGC,GAAK,IAAKA,EAAG,CACpD,IAAId,EAAQ3B,KAAKgC,WAAWS,GAC5B,GAAId,EAAMG,aAAeA,EAAY,OAAO9B,KAAK0E,SAAS/C,EAAMQ,WAAYR,EAAMI,UAAWG,EAAcP,GAAQxC,CACrH,CACF,EACA,MAAS,SAAgByC,GACvB,IAAK,IAAIa,EAAIzC,KAAKgC,WAAWQ,OAAS,EAAGC,GAAK,IAAKA,EAAG,CACpD,IAAId,EAAQ3B,KAAKgC,WAAWS,GAC5B,GAAId,EAAMC,SAAWA,EAAQ,CAC3B,IAAIpC,EAASmC,EAAMQ,WACnB,GAAI,UAAY3C,EAAOE,KAAM,CAC3B,IAAIkF,EAASpF,EAAOZ,IACpBsD,EAAcP,EAChB,CACA,OAAOiD,CACT,CACF,CACA,MAAM,IAAI/F,MAAM,wBAClB,EACAgG,cAAe,SAAuBxC,EAAUf,EAAYE,GAC1D,OAAOxB,KAAKhB,SAAW,CACrBhC,SAAUoD,EAAOiC,GACjBf,WAAYA,EACZE,QAASA,GACR,SAAWxB,KAAKrB,SAAWqB,KAAKpB,SAAME,GAAYK,CACvD,GACC7C,CACL,CACAD,EAAOC,QAAUF,EAAqBC,EAAOC,QAAQC,YAAa,EAAMF,EAAOC,QAAiB,QAAID,EAAOC,iBC3S3G,SAASJ,EAAQoB,GAGf,OAAQjB,EAAOC,QAAUJ,EAAU,mBAAqBY,QAAU,iBAAmBA,OAAOE,SAAW,SAAUM,GAC/G,cAAcA,CAChB,EAAI,SAAUA,GACZ,OAAOA,GAAO,mBAAqBR,QAAUQ,EAAIyF,cAAgBjG,QAAUQ,IAAQR,OAAOJ,UAAY,gBAAkBY,CAC1H,EAAGjB,EAAOC,QAAQC,YAAa,EAAMF,EAAOC,QAAiB,QAAID,EAAOC,QAAUJ,EAAQoB,EAC5F,CACAjB,EAAOC,QAAUJ,EAASG,EAAOC,QAAQC,YAAa,EAAMF,EAAOC,QAAiB,QAAID,EAAOC,uBCP/F,IAAIwI,EAAU3I,EAAQ,IAARA,GACdE,EAAOC,QAAUwI,EAGjB,IACEC,mBAAqBD,CAOvB,CANE,MAAOE,GACmB,iBAAfC,WACTA,WAAWF,mBAAqBD,EAEhCI,SAAS,IAAK,yBAAdA,CAAwCJ,EAE5C,ICbIK,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBvG,IAAjBwG,EACH,OAAOA,EAAahJ,QAGrB,IAAID,EAAS8I,EAAyBE,GAAY,CAGjD/I,QAAS,CAAC,GAOX,OAHAiJ,EAAoBF,GAAUhJ,EAAQA,EAAOC,QAAS8I,GAG/C/I,EAAOC,OACf,CCrBA8I,EAAoBI,EAAKnJ,IACxB,IAAIoJ,EAASpJ,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADA+I,EAAoBM,EAAED,EAAQ,CAAEE,EAAGF,IAC5BA,CAAM,ECLdL,EAAoBM,EAAI,CAACpJ,EAASsJ,KACjC,IAAI,IAAIrI,KAAOqI,EACXR,EAAoBS,EAAED,EAAYrI,KAAS6H,EAAoBS,EAAEvJ,EAASiB,IAC5Ed,OAAOgB,eAAenB,EAASiB,EAAK,CAAEG,YAAY,EAAMoI,IAAKF,EAAWrI,IAE1E,ECND6H,EAAoBS,EAAI,CAACvI,EAAKyI,IAAUtJ,OAAOC,UAAUE,eAAegD,KAAKtC,EAAKyI,GCClFX,EAAoBY,EAAK1J,IACH,oBAAXQ,QAA0BA,OAAOM,aAC1CX,OAAOgB,eAAenB,EAASQ,OAAOM,YAAa,CAAEI,MAAO,WAE7Df,OAAOgB,eAAenB,EAAS,aAAc,CAAEkB,OAAO,GAAO,8BCL9D,SAASyI,EAAmBC,EAAKvF,EAASC,EAAQuF,EAAOC,EAAQ7I,EAAKqB,GACpE,IACE,IAAIyC,EAAO6E,EAAI3I,GAAKqB,GAChBpB,EAAQ6D,EAAK7D,KAInB,CAHE,MAAOyD,GAEP,YADAL,EAAOK,EAET,CACII,EAAKtC,KACP4B,EAAQnD,GAER8F,QAAQ3C,QAAQnD,GAAOuD,KAAKoF,EAAOC,EAEvC,CACe,SAASC,EAAkB1G,GACxC,OAAO,WACL,IAAI1B,EAAO+B,KACTsG,EAAOC,UACT,OAAO,IAAIjD,SAAQ,SAAU3C,EAASC,GACpC,IAAIsF,EAAMvG,EAAG6G,MAAMvI,EAAMqI,GACzB,SAASH,EAAM3I,GACbyI,EAAmBC,EAAKvF,EAASC,EAAQuF,EAAOC,EAAQ,OAAQ5I,EAClE,CACA,SAAS4I,EAAOvI,GACdoI,EAAmBC,EAAKvF,EAASC,EAAQuF,EAAOC,EAAQ,QAASvI,EACnE,CACAsI,OAAMrH,EACR,GACF,CACF,8BC7BA,MAAM,EAA+B2H,OAAOC,KAAKC,OAAO,0BCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,iBCAzC,SAASC,IAYtB,OAXAA,EAAWnK,OAAOoK,OAASpK,OAAOoK,OAAOC,OAAS,SAAUC,GAC1D,IAAK,IAAItE,EAAI,EAAGA,EAAI8D,UAAU/D,OAAQC,IAAK,CACzC,IAAIuE,EAAST,UAAU9D,GACvB,IAAK,IAAIlF,KAAOyJ,EACVvK,OAAOC,UAAUE,eAAegD,KAAKoH,EAAQzJ,KAC/CwJ,EAAOxJ,GAAOyJ,EAAOzJ,GAG3B,CACA,OAAOwJ,CACT,EACOH,EAASJ,MAAMxG,KAAMuG,UAC9B,CCbA,IAEIU,EACAC,EAqBEC,EAAmB,IAAIC,QACvBC,EAAqB,IAAID,QACzBE,EAA2B,IAAIF,QAC/BG,EAAiB,IAAIH,QACrBI,EAAwB,IAAIJ,QA0D9BK,EAAgB,CAChB3B,IAAG,SAACiB,EAAQhB,EAAM2B,GACd,GAAIX,aAAkBY,eAAgB,CAElC,GAAa,SAAT5B,EACA,OAAOsB,EAAmBvB,IAAIiB,GAElC,GAAa,qBAAThB,EACA,OAAOgB,EAAOa,kBAAoBN,EAAyBxB,IAAIiB,GAGnE,GAAa,UAAThB,EACA,OAAO2B,EAASE,iBAAiB,QAC3B9I,EACA4I,EAASG,YAAYH,EAASE,iBAAiB,GAE7D,CAEA,OAAO9J,EAAKiJ,EAAOhB,GACvB,EACA+B,IAAG,SAACf,EAAQhB,EAAMvI,GAEd,OADAuJ,EAAOhB,GAAQvI,GACR,CACX,EACAuK,IAAG,SAAChB,EAAQhB,GACR,OAAIgB,aAAkBY,iBACR,SAAT5B,GAA4B,UAATA,IAGjBA,KAAQgB,CACnB,GAoCJ,SAASiB,EAAuBxK,GAC5B,MAAqB,mBAAVA,GAhCOyK,EAiCMzK,KA7BX0K,YAAYxL,UAAUyL,aAC7B,qBAAsBR,eAAejL,WA7GnCwK,IACHA,EAAuB,CACpBkB,UAAU1L,UAAU2L,QACpBD,UAAU1L,UAAS,SACnB0L,UAAU1L,UAAU4L,sBAqHEC,SAASN,GAC5B,WAAmB,2BAAN3B,EAAI,yBAAJA,EAAI,gBAIpB,OADA2B,EAAKzB,MAAMgC,EAAOxI,MAAOsG,GAClBxI,EAAKqJ,EAAiBrB,IAAI9F,MACrC,EAEG,WAAmB,2BAANsG,EAAI,yBAAJA,EAAI,gBAGpB,OAAOxI,EAAKmK,EAAKzB,MAAMgC,EAAOxI,MAAOsG,GACzC,EAvBW,SAAUmC,GAAqB,2BAANnC,EAAI,iCAAJA,EAAI,kBAChC,IAAMoC,EAAKT,EAAKrI,KAAI,MAATqI,EAAI,CAAMO,EAAOxI,MAAOyI,GAAU,OAAKnC,IAElD,OADAgB,EAAyBQ,IAAIY,EAAID,EAAWE,KAAOF,EAAWE,OAAS,CAACF,IACjE3K,EAAK4K,EAChB,GA0BAlL,aAAiBmK,gBAhGzB,SAAwCe,GAEpC,IAAIrB,EAAmBU,IAAIW,GAA3B,CAEA,IAAM3J,EAAO,IAAIuE,SAAQ,SAAC3C,EAASC,GAC/B,IAAMgI,EAAW,WACbF,EAAGG,oBAAoB,WAAYnE,GACnCgE,EAAGG,oBAAoB,QAAS5H,GAChCyH,EAAGG,oBAAoB,QAAS5H,EACpC,EACMyD,EAAW,WACb/D,IACAiI,GACJ,EACM3H,EAAQ,WACVL,EAAO8H,EAAGzH,OAAS,IAAI6H,aAAa,aAAc,eAClDF,GACJ,EACAF,EAAGK,iBAAiB,WAAYrE,GAChCgE,EAAGK,iBAAiB,QAAS9H,GAC7ByH,EAAGK,iBAAiB,QAAS9H,EACjC,IAEAoG,EAAmBS,IAAIY,EAAI3J,EApBjB,CAqBd,CAyEQiK,CAA+BxL,GA9JhBiG,EA+JDjG,GAzJVyJ,IACHA,EAAoB,CACjBiB,YACAe,eACAC,SACAd,UACAT,kBAZiDwB,MAAK,SAACC,GAAC,OAAK3F,aAAkB2F,CAAC,IAgK7E,IAAIC,MAAM7L,EAAOiK,GAErBjK,GAzCX,IAAsByK,EAzHCxE,CAmKvB,CACA,SAAS3F,EAAKN,GAGV,GAAIA,aAAiB8L,WACjB,OA3IkBC,EA2IM/L,GA1ItBgM,EAAU,IAAIlG,SAAQ,SAAC3C,EAASC,GAClC,IAAMgI,EAAW,WACbW,EAAQV,oBAAoB,UAAWY,GACvCF,EAAQV,oBAAoB,QAAS5H,EACzC,EACMwI,EAAU,WACZ9I,EAAQ7C,EAAKyL,EAAQ1I,SACrB+H,GACJ,EACM3H,EAAQ,WACVL,EAAO2I,EAAQtI,OACf2H,GACJ,EACAW,EAAQR,iBAAiB,UAAWU,GACpCF,EAAQR,iBAAiB,QAAS9H,EACtC,KAEKF,MAAK,SAACvD,GAGHA,aAAiB4K,WACjBjB,EAAiBW,IAAItK,EAAO+L,EAGpC,IAAE,OACS,WAAQ,IAGnB/B,EAAsBM,IAAI0B,EAASD,GAC5BC,EA9BX,IAA0BD,EAChBC,EA6IN,GAAIjC,EAAeQ,IAAIvK,GACnB,OAAO+J,EAAezB,IAAItI,GAC9B,IAAMkM,EAAW1B,EAAuBxK,GAOxC,OAJIkM,IAAalM,IACb+J,EAAeO,IAAItK,EAAOkM,GAC1BlC,EAAsBM,IAAI4B,EAAUlM,IAEjCkM,CACX,CACA,IAAMlB,EAAS,SAAChL,GAAK,OAAKgK,EAAsB1B,IAAItI,EAAM,EC5K1D,SAASmM,EAAO3G,EAAM4G,EAAS,GAAiD,iBAAJ,CAAC,EAAC,EAA7CC,EAAO,EAAPA,QAASC,EAAO,EAAPA,QAASC,EAAQ,EAARA,SAAUC,EAAU,EAAVA,WACnDT,EAAUU,UAAUC,KAAKlH,EAAM4G,GAC/BO,EAAcrM,EAAKyL,GAoBzB,OAnBIO,GACAP,EAAQR,iBAAiB,iBAAiB,SAACqB,GACvCN,EAAQhM,EAAKyL,EAAQ1I,QAASuJ,EAAMC,WAAYD,EAAME,WAAYxM,EAAKyL,EAAQpB,aAAciC,EACjG,IAEAP,GACAN,EAAQR,iBAAiB,WAAW,SAACqB,GAAK,OAAKP,EAE/CO,EAAMC,WAAYD,EAAME,WAAYF,EAAM,IAE9CD,EACKpJ,MAAK,SAACwJ,GACHP,GACAO,EAAGxB,iBAAiB,SAAS,kBAAMiB,GAAY,IAC/CD,GACAQ,EAAGxB,iBAAiB,iBAAiB,SAACqB,GAAK,OAAKL,EAASK,EAAMC,WAAYD,EAAME,WAAYF,EAAM,GAE3G,IAAE,OACS,WAAQ,IACZD,CACX,CAgBA,IAuCcK,EAvCRC,EAAc,CAAC,MAAO,SAAU,SAAU,aAAc,SACxDC,EAAe,CAAC,MAAO,MAAO,SAAU,SACxCC,EAAgB,IAAIC,IAC1B,SAASC,EAAU9D,EAAQhB,GACvB,GAAMgB,aAAkBmB,eAClBnC,KAAQgB,IACM,iBAAThB,EAFX,CAKA,GAAI4E,EAAc7E,IAAIC,GAClB,OAAO4E,EAAc7E,IAAIC,GAC7B,IAAM+E,EAAiB/E,EAAKgF,QAAQ,aAAc,IAC5CC,EAAWjF,IAAS+E,EACpBG,EAAUP,EAAanC,SAASuC,GACtC,GAEEA,KAAmBE,EAAW9B,SAAWD,gBAAgBvM,YACrDuO,GAAWR,EAAYlC,SAASuC,IAHtC,CAMA,IAAMnM,EAAM,2BAAG,WAAgBuM,GAAS,2FAGf,IADfxC,EAAK1I,KAAKmI,YAAY+C,EAAWD,EAAU,YAAc,YAC3DlE,EAAS2B,EAAGyC,MAAK,WAHoB7E,EAAI,iCAAJA,EAAI,UAU7C,OANI0E,IACAjE,EAASA,EAAOqE,MAAM9E,EAAK+E,UAK/B,SACc/H,QAAQgI,IAAI,EACtB,EAAAvE,GAAO+D,GAAe,QAAIxE,GAC1B2E,GAAWvC,EAAG3J,OAChB,uCAAE,IAAC,gDACR,gBAfW,sCAiBZ,OADA4L,EAAc7C,IAAI/B,EAAMpH,GACjBA,CAlBP,CAXA,CA8BJ,CDgCI8I,EC/BkB,KAAR+C,ED+Be/C,EC9Bd,CACX3B,IAAK,SAACiB,EAAQhB,EAAM2B,GAAQ,OAAKmD,EAAU9D,EAAQhB,IAASyE,EAAS1E,IAAIiB,EAAQhB,EAAM2B,EAAS,EAChGK,IAAK,SAAChB,EAAQhB,GAAI,QAAO8E,EAAU9D,EAAQhB,IAASyE,EAASzC,IAAIhB,EAAQhB,EAAK,IC3FlF,MAAM,EAA+BU,OAAOC,KAAKC,OAAO,uCCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,6CCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,iDCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,yCCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,+CCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,yCCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,yCCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,yCCMH,SAEtC4E,EAAa,GAAD,4CAQ1B,OAR0B,cAA3B,WAA4BC,GAAI,uEAES,OAFT,SAEtBC,EAAQC,IAAYF,EAAKC,OAAM,SAC/BE,UAAUC,MAAM,CAAEH,MAAAA,EAAOI,IAAKL,EAAKK,MAAM,OAC/CC,WAAWC,YAAc,0BAA0B,gDAEnDC,QAAQC,IAAI,UAAY,EAAH,IAAQ,0DAEhC,sBAED,MClBM,EAA+BxF,OAAOC,KAAKC,OAAO,kDCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,8CCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,wCCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,uCCAxD,MAAM,GAA+BF,OAAOC,KAAKC,OAAO,sCCUlDuF,GAAgB,SAACC,GACrB,OAAOC,IAAAA,GAAAA,YAAAA,UACM,CACTC,iBAAiB,EACjBC,qBAAsBF,IAAAA,MAAAA,UAAoB,oBAE3CrL,MAAK,SAACwL,GACAJ,GAELC,IAAAA,QAAY,CACVzN,OAAQ,OACRkN,IAAKO,IAAAA,MAAAA,UAAoB,UAAY,YACrCI,KAAM,CAAED,aAAAA,IAEZ,GACJ,EAEME,GAAc,WAClB,IAAKL,IAAAA,QAAAA,KAAkB,OAAO,EAE9B,IACI7O,EADED,EAAM8O,IAAAA,QAAAA,KAAAA,cAGZ,IAAK7O,KAAOD,EACV,IAAoB,iBAARC,GAAoBA,aAAemP,SAAWnP,EAAIoP,WAAW,YAAcpP,EAAIqP,SAAS,UAAYtP,EAAIC,GAClH,OAAO,EAIX,OAAO,CACT,EAEasP,GAAmB,6BAAG,WAAOC,GAAE,oEACrCV,IAAAA,MAAAA,gBAA0B,iBAAkBW,SAA6C,YAAnCA,OAAOC,aAAaC,aAA4BR,KAAa,0CAE9GP,IAAc,GAAK,0DAEpBY,EAAGI,YAAa,CAAF,kDAGnBJ,EAAGI,YAAYC,kBAAkBpM,MAAK,SAACqM,GAAC,OAAKA,EAAEC,cAActM,KAAKmL,GAAcpF,aAAW,GAAM,IAAE,QAEvGsF,IAAAA,MAAAA,cAAyB,EAAK,yDAC/B,gBAX+B,sCAa1BkB,GAAiB,WACrB,OAAOlB,IAAAA,MAAAA,UAAoB,iBAC7B,EC/CAA,IAAAA,aAAAA,IAAqB,yBAAyB,YAI5CmB,EAAAA,EAAAA,QAAOC,IAAAA,UAAgB,UAAU,WAC/B,IAAMC,EAAWrB,IAAAA,MAAAA,UAAoB,YAAYsB,UAAU,KAErDC,EAAU,6BAAG,oFAKf,OAJIC,EAAYjE,EAAO,eAAgB,EAAG,CAC1CG,QAAO,SAACS,GACNA,EAAGsD,kBAAkB,SACvB,IACA,SACKD,EAAS,cAAEE,IAAI,SAAU1B,IAAAA,MAAAA,KAAAA,WAA2B,uBAEvD,kBAAmBT,WACrBA,UAAUoC,cACPC,SAASP,EAAW,MAAO,CAC1BQ,MAAOR,EAAW,MAEnB1M,MAAK,SAAC+L,GACLnB,UAAUoC,cAAcG,MAAMnN,MAAK,WACjCqL,IAAAA,GAASU,EACTD,GAAoBC,EACtB,GACF,IACH,2CACF,kBApBe,mCAsBhBa,GACF,KAEAJ,EAAAA,EAAAA,QAAOY,IAAAA,UAA2B,SAAS,SAACC,IA9B1CrB,OAAOsB,WAAW,8BAA8BC,SAAWvB,OAAOpB,UAAU4C,YAAcC,SAASC,SAASlG,SAAS,oBA+BzF6F,EAAMrG,IAAI,mBACpCqG,EAAMrD,QACJ,iBACA2D,IAAAA,UACE,CACEC,KAAM,gBACNC,KAAMxC,IAAAA,MAAAA,UAAoB,YAC1BrF,OAAQ,QACR8H,UAAU,GAEZzC,IAAAA,WAAAA,MAAqB,mCAI7B,KPtCAmB,EAAAA,EAAAA,QAAOuB,IAAoB,gBAAgB,SAAUV,EAAOW,GACrDpD,UAAUC,OAEfwC,EAAMY,IACJ,QACAC,IAAAA,UACE,CACEN,KAAM,sBACNO,QAAS,kBACP3D,EAAa,CACXE,MAAOsD,EAAWtD,QAClBI,IAAKkB,OAAOoC,SAASC,SAAW,KAAOrC,OAAOoC,SAASE,SAAWjD,IAAAA,MAAAA,WAAqB2C,IACvF,GAEN3C,IAAAA,WAAAA,MAAqB,2DAEtB,EAEL,KAEAmB,EAAAA,EAAAA,QAAO+B,IAAc,gBAAgB,SAAUlB,EAAOmB,GAC/C5D,UAAUC,OAEfwC,EAAMY,IACJ,QACAC,IAAAA,UACE,CACEN,KAAM,sBACNO,QAAS,kBACP3D,EAAa,CACXE,MAAOW,IAAAA,WAAAA,MAAqB,qDAAsD,CAChFoD,SAAUD,EAAKE,OAAO9M,cACtB8I,MAAO8D,EAAKR,aAAatD,UAE3BI,IAAKkB,OAAOoC,SAASC,SAAW,KAAOrC,OAAOoC,SAASE,SAAWjD,IAAAA,MAAAA,KAAemD,IACjF,GAENnD,IAAAA,WAAAA,MAAqB,oDAEvB,IAEJ,KAEAmB,EAAAA,EAAAA,QAAOmC,IAAc,gBAAgB,SAAUtB,EAAOqB,GAC/C9D,UAAUC,OAEfwC,EAAMY,IACJ,QACAC,IAAAA,UACE,CACEN,KAAM,sBACNO,QAAS,kBACP3D,EAAa,CACXE,MAAOgE,EAAK9M,cACZkJ,IAAKkB,OAAOoC,SAASC,SAAW,KAAOrC,OAAOoC,SAASE,SAAWjD,IAAAA,MAAAA,KAAeqD,IACjF,GAENrD,IAAAA,WAAAA,MAAqB,oDAEvB,IAEJ,KMpBAmB,EAAAA,EAAAA,QAAOC,IAAAA,UAAgB,YAAY,WACjC,GAAKF,KAAL,CAEA,IAAMqC,EAAe,WACnBC,aAAaC,QAAQ,sCAAuCC,KAAKC,UAAU,CAAEC,WAAW,IAAIC,MAAOC,YACrG,EAEA9D,IAAAA,OAAAA,QAAmBA,IAAAA,MAAAA,iBAGhBwD,aAAaO,QAAQ,wCACtB,iBAAkBpD,QACiB,YAAnCA,OAAOC,aAAaC,YACpBR,OAEAL,IAAAA,MAAAA,eAA2BA,IAAAA,OAAAA,KACzB,CACEgE,SAAU,CACR,EAAC,IAAI,CAACC,MAAM,sBAAsBzB,KAAMxC,IAAAA,MAAU,YAAa8C,QAAS,kBAAMS,GAAc,GACzFvD,IAAAA,WAAAA,MAAqB,8CAG1BkE,UAAWX,GAEbvD,IAAAA,WAAAA,MAAqB,sCAvBI,CA0B/B,KAEAmB,EAAAA,EAAAA,QAAOgD,IAAAA,UAA4B,uBAAuB,SAAUnC,GAC7Dd,MAELc,EAAMY,IAAI,OAAQ,CAChBhM,KAAM,OACN2L,KAAM,gBACN6B,MAAOpE,IAAAA,WAAAA,MAAqB,8CAEhC,KAEAmB,EAAAA,EAAAA,QAAOkD,IAAAA,UAAwB,sBAAsB,SAAUrC,GAC7D,GAAKd,KAEL,GAAM,iBAAkBP,OAmBxB,GAAuC,YAAnCA,OAAOC,aAAaC,WAA0B,CAChD,IAAKK,KAAkB,OAEvBc,EAAMY,IACJ,qBACA0B,IAAAA,UACE,CACEC,cAAe,oBACfC,aAAa,EACbR,SAAU,CACRnB,IAAAA,UACE,CACE4B,UAAW,sBACX3B,QAAS,WACPnC,OAAOC,aAAa8D,mBAAkB,SAACC,GACrCC,EAAEC,SAEU,YAARF,GACF7E,IAAc,EAElB,GACF,GAEFE,IAAAA,WAAAA,MAAqB,4EAI3B,CAACuC,KAAK,6BAA8BvC,IAAAA,WAAAA,MAAqB,oEAE3D,GAEJ,KAA8C,WAAnCW,OAAOC,aAAaC,YAC7BmB,EAAMY,IACJ,oBACA0B,IAAAA,UACE,CACEC,cAAe,oBACfC,aAAa,EACblR,KAAM,QACN0Q,SAAU,CACR,OACEC,MAAM,sBACNzB,KAAK,oIAEJxC,IAAAA,WAAAA,MAAqB,2EAI5B,CAACuC,KAAK,+BAAgCvC,IAAAA,WAAAA,MAAqB,mEAE7D,SApEFgC,EAAMY,IACJ,0BACA0B,IAAAA,UACE,CACEE,aAAa,EACbR,SAAU,CACR,OAAGC,MAAM,sBAAsBzB,KAAK,6DACjCxC,IAAAA,WAAAA,MAAqB,gFAI5B,CAACuC,KAAK,+BAAgCvC,IAAAA,WAAAA,MAAqB,wEAE7D,GA0DN,GCjHF","sources":["webpack://@askvortsov/flarum-pwa/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@askvortsov/flarum-pwa/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@askvortsov/flarum-pwa/./node_modules/@babel/runtime/regenerator/index.js","webpack://@askvortsov/flarum-pwa/webpack/bootstrap","webpack://@askvortsov/flarum-pwa/webpack/runtime/compat get default export","webpack://@askvortsov/flarum-pwa/webpack/runtime/define property getters","webpack://@askvortsov/flarum-pwa/webpack/runtime/hasOwnProperty shorthand","webpack://@askvortsov/flarum-pwa/webpack/runtime/make namespace object","webpack://@askvortsov/flarum-pwa/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['forum/app']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['common/extend']\"","webpack://@askvortsov/flarum-pwa/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@askvortsov/flarum-pwa/./node_modules/idb/build/wrap-idb-value.js","webpack://@askvortsov/flarum-pwa/./node_modules/idb/build/index.js","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['common/components/Page']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['forum/components/SessionDropdown']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['forum/utils/DiscussionControls']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['forum/utils/PostControls']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['forum/utils/UserControls']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['common/components/Button']\"","webpack://@askvortsov/flarum-pwa/./src/forum/addShareButtons.js","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['forum/components/NotificationGrid']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['forum/components/SettingsPage']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['common/components/Alert']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['common/components/Link']\"","webpack://@askvortsov/flarum-pwa/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@askvortsov/flarum-pwa/./src/forum/addPushNotifications.js","webpack://@askvortsov/flarum-pwa/./src/forum/index.ts"],"sourcesContent":["var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n    Op = Object.prototype,\n    hasOwn = Op.hasOwnProperty,\n    $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n    iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n    asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n    toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n      generator = Object.create(protoGenerator.prototype),\n      context = new Context(tryLocsList || []);\n    return generator._invoke = function (innerFn, self, context) {\n      var state = \"suspendedStart\";\n      return function (method, arg) {\n        if (\"executing\" === state) throw new Error(\"Generator is already running\");\n        if (\"completed\" === state) {\n          if (\"throw\" === method) throw arg;\n          return doneResult();\n        }\n        for (context.method = method, context.arg = arg;;) {\n          var delegate = context.delegate;\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n          if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n            if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n            context.dispatchException(context.arg);\n          } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n          state = \"executing\";\n          var record = tryCatch(innerFn, self, context);\n          if (\"normal\" === record.type) {\n            if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          }\n          \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n        }\n      };\n    }(innerFn, self, context), generator;\n  }\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n    NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n          value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n      reject(record.arg);\n    }\n    var previousPromise;\n    this._invoke = function (method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n      return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    };\n  }\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (undefined === method) {\n      if (context.delegate = null, \"throw\" === context.method) {\n        if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel;\n        context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n      return ContinueSentinel;\n    }\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n          next = function next() {\n            for (; ++i < iterable.length;) {\n              if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n            }\n            return next.value = undefined, next.done = !0, next;\n          };\n        return next.next = next;\n      }\n    }\n    return {\n      next: doneResult\n    };\n  }\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) {\n        \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n      }\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n          record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n            hasFinally = hasOwn.call(entry, \"finallyLoc\");\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst cursorRequestMap = new WeakMap();\nconst transactionDoneMap = new WeakMap();\nconst transactionStoreNamesMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    promise\n        .then((value) => {\n        // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval\n        // (see wrapFunction).\n        if (value instanceof IDBCursor) {\n            cursorRequestMap.set(value, request);\n        }\n        // Catching to avoid \"Uncaught Promise exceptions\"\n    })\n        .catch(() => { });\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Polyfill for objectStoreNames because of Edge.\n            if (prop === 'objectStoreNames') {\n                return target.objectStoreNames || transactionStoreNamesMap.get(target);\n            }\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Edge doesn't support objectStoreNames (booo), so we polyfill it here.\n    if (func === IDBDatabase.prototype.transaction &&\n        !('objectStoreNames' in IDBTransaction.prototype)) {\n        return function (storeNames, ...args) {\n            const tx = func.call(unwrap(this), storeNames, ...args);\n            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);\n            return wrap(tx);\n        };\n    }\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(cursorRequestMap.get(this));\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\nexport { reverseTransformCache as a, instanceOfAny as i, replaceTraps as r, unwrap as u, wrap as w };\n","import { w as wrap, r as replaceTraps } from './wrap-idb-value.js';\nexport { u as unwrap, w as wrap } from './wrap-idb-value.js';\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction), event);\n        });\n    }\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event.newVersion, event));\n    }\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking) {\n            db.addEventListener('versionchange', (event) => blocking(event.oldVersion, event.newVersion, event));\n        }\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event));\n    }\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nexport { deleteDB, openDB };\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/SessionDropdown'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/DiscussionControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/PostControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/UserControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport extractText from 'flarum/common/utils/extractText';\nimport DiscussionControls from 'flarum/forum/utils/DiscussionControls';\nimport PostControls from 'flarum/forum/utils/PostControls';\nimport UserControls from 'flarum/forum/utils/UserControls';\nimport Button from 'flarum/common/components/Button';\n\nasync function shareContent(data) {\n  try {\n    const title = extractText(data.title);\n    await navigator.share({ title, url: data.url });\n    resultPara.textContent = 'MDN shared successfully';\n  } catch (err) {\n    console.log('Error: ' + err);\n  }\n}\n\nexport default () => {\n  extend(DiscussionControls, 'userControls', function (items, discussion) {\n    if (!navigator.share) return;\n\n    items.add(\n      'share',\n      Button.component(\n        {\n          icon: 'fas fa-share-square',\n          onclick: () =>\n            shareContent({\n              title: discussion.title(),\n              url: window.location.protocol + '//' + window.location.hostname + app.route.discussion(discussion),\n            }),\n        },\n        app.translator.trans('askvortsov-pwa.forum.discussion_controls.share_button')\n      ),\n      -1\n    );\n  });\n\n  extend(PostControls, 'userControls', function (items, post) {\n    if (!navigator.share) return;\n\n    items.add(\n      'share',\n      Button.component(\n        {\n          icon: 'fas fa-share-square',\n          onclick: () =>\n            shareContent({\n              title: app.translator.trans('askvortsov-pwa.forum.post_controls.share_api.title', {\n                username: post.user().displayName(),\n                title: post.discussion().title(),\n              }),\n              url: window.location.protocol + '//' + window.location.hostname + app.route.post(post),\n            }),\n        },\n        app.translator.trans('askvortsov-pwa.forum.post_controls.share_button')\n      ),\n      100\n    );\n  });\n\n  extend(UserControls, 'userControls', function (items, user) {\n    if (!navigator.share) return;\n\n    items.add(\n      'share',\n      Button.component(\n        {\n          icon: 'fas fa-share-square',\n          onclick: () =>\n            shareContent({\n              title: user.displayName(),\n              url: window.location.protocol + '//' + window.location.hostname + app.route.user(user),\n            }),\n        },\n        app.translator.trans('askvortsov-pwa.forum.user_controls.share_button')\n      ),\n      100\n    );\n  });\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/NotificationGrid'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/SettingsPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Alert'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport NotificationGrid from 'flarum/forum/components/NotificationGrid';\nimport SettingsPage from 'flarum/forum/components/SettingsPage';\nimport Alert from 'flarum/common/components/Alert';\nimport Button from 'flarum/common/components/Button';\nimport Link from 'flarum/common/components/Link';\nimport Page from 'flarum/common/components/Page';\nimport icon from 'flarum/common/helpers/icon';\n\nconst subscribeUser = (save) => {\n  return app.sw.pushManager\n    .subscribe({\n      userVisibleOnly: true,\n      applicationServerKey: app.forum.attribute('vapidPublicKey'),\n    })\n    .then((subscription) => {\n      if (!save) return;\n\n      app.request({\n        method: 'POST',\n        url: app.forum.attribute('apiUrl') + '/pwa/push',\n        body: { subscription },\n      });\n    });\n};\n\nconst pushEnabled = () => {\n  if (!app.session.user) return false;\n\n  const obj = app.session.user.preferences();\n  let key;\n\n  for (key in obj) {\n    if ((typeof key === 'string' || key instanceof String) && key.startsWith('notify_') && key.endsWith('_push') && obj[key]) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nexport const refreshSubscription = async (sw) => {\n  if (!app.cache.pwaRefreshed && 'Notification' in window && window.Notification.permission === 'granted' && pushEnabled())\n    try {\n      await subscribeUser(true);\n    } catch (e) {\n      if (!sw.pushManager) {\n        return;\n      }\n      sw.pushManager.getSubscription().then((s) => s.unsubscribe().then(subscribeUser.bind(this, true)));\n    }\n  app.cache.pwaRefreshed = true;\n};\n\nconst pushConfigured = () => {\n  return app.forum.attribute('vapidPublicKey');\n};\n\nexport default () => {\n  extend(Page.prototype, 'oncreate', () => {\n    if (!pushConfigured()) return;\n\n    const dismissAlert = () => {\n      localStorage.setItem('askvortov-pwa.notif-alert.dismissed', JSON.stringify({ timestamp: new Date().getTime() }));\n    };\n\n    app.alerts.dismiss(app.cache.pwaNotifsAlert);\n\n    if (\n      !localStorage.getItem('askvortov-pwa.notif-alert.dismissed') &&\n      'Notification' in window &&\n      window.Notification.permission === 'default' &&\n      pushEnabled()\n    ) {\n      app.cache.pwaNotifsAlert = app.alerts.show(\n        {\n          controls: [\n            <Link class=\"Button Button--link\" href={app.route('settings')} onclick={() => dismissAlert()}>\n              {app.translator.trans('askvortsov-pwa.forum.alerts.optin_button')}\n            </Link>,\n          ],\n          ondismiss: dismissAlert,\n        },\n        app.translator.trans('askvortsov-pwa.forum.alerts.optin')\n      );\n    }\n  });\n\n  extend(NotificationGrid.prototype, 'notificationMethods', function (items) {\n    if (!pushConfigured()) return;\n\n    items.add('push', {\n      name: 'push',\n      icon: 'fas fa-mobile',\n      label: app.translator.trans('askvortsov-pwa.forum.settings.push_header'),\n    });\n  });\n\n  extend(SettingsPage.prototype, 'notificationsItems', function (items) {\n    if (!pushConfigured()) return;\n\n    if (!('Notification' in window)) {\n      items.add(\n        'push-no-browser-support',\n        Alert.component(\n          {\n            dismissible: false,\n            controls: [\n              <a class=\"Button Button--link\" href=\"https://developer.mozilla.org/en-US/docs/Web/API/Push_API\">\n                {app.translator.trans('askvortsov-pwa.forum.settings.pwa_notifications.no_browser_support_button')}\n              </a>,\n            ],\n          },\n          [icon('fas fa-exclamation-triangle'), app.translator.trans('askvortsov-pwa.forum.settings.pwa_notifications.no_browser_support')]\n        ),\n        10\n      );\n      return;\n    }\n\n    if (window.Notification.permission === 'default') {\n      if (!pushConfigured()) return;\n\n      items.add(\n        'push-optin-default',\n        Alert.component(\n          {\n            itemClassName: 'pwa-setting-alert',\n            dismissible: false,\n            controls: [\n              Button.component(\n                {\n                  className: 'Button Button--link',\n                  onclick: () => {\n                    window.Notification.requestPermission((res) => {\n                      m.redraw();\n\n                      if (res === 'granted') {\n                        subscribeUser(true);\n                      }\n                    });\n                  },\n                },\n                app.translator.trans('askvortsov-pwa.forum.settings.pwa_notifications.access_default_button')\n              ),\n            ],\n          },\n          [icon('fas fa-exclamation-circle'), app.translator.trans('askvortsov-pwa.forum.settings.pwa_notifications.access_default')]\n        ),\n        10\n      );\n    } else if (window.Notification.permission === 'denied') {\n      items.add(\n        'push-optin-denied',\n        Alert.component(\n          {\n            itemClassName: 'pwa-setting-alert',\n            dismissible: false,\n            type: 'error',\n            controls: [\n              <a\n                class=\"Button Button--link\"\n                href=\"https://support.humblebundle.com/hc/en-us/articles/360008513933-Enabling-and-Disabling-Browser-Notifications-in-Various-Browsers\"\n              >\n                {app.translator.trans('askvortsov-pwa.forum.settings.pwa_notifications.access_denied_button')}\n              </a>,\n            ],\n          },\n          [icon('fas fa-exclamation-triangle'), app.translator.trans('askvortsov-pwa.forum.settings.pwa_notifications.access_denied')]\n        ),\n        10\n      );\n    }\n  });\n};\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport { openDB } from 'idb';\n\nimport Page from 'flarum/common/components/Page';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport SessionDropdown from 'flarum/forum/components/SessionDropdown';\nimport addShareButtons from './addShareButtons';\nimport addPushNotifications, { refreshSubscription } from './addPushNotifications';\n\napp.initializers.add('askvortsov/flarum-pwa', () => {\n  const isInStandaloneMode = () =>\n    window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone || document.referrer.includes('android-app://');\n\n  extend(Page.prototype, 'oninit', () => {\n    const basePath = app.forum.attribute('basePath').trimRight('/');\n\n    const registerSW = async () => {\n      const dbPromise = openDB('keyval-store', 1, {\n        upgrade(db) {\n          db.createObjectStore('keyval');\n        },\n      });\n      (await dbPromise).put('keyval', app.forum.data.attributes, 'flarum.forumPayload');\n\n      if ('serviceWorker' in navigator) {\n        navigator.serviceWorker\n          .register(basePath + '/sw', {\n            scope: basePath + '/',\n          })\n          .then((sw) => {\n            navigator.serviceWorker.ready.then(() => {\n              app.sw = sw;\n              refreshSubscription(sw);\n            });\n          });\n      }\n    };\n\n    registerSW();\n  });\n\n  extend(SessionDropdown.prototype, 'items', (items) => {\n    if (isInStandaloneMode() && items.has('administration')) {\n      items.replace(\n        'administration',\n        LinkButton.component(\n          {\n            icon: 'fas fa-wrench',\n            href: app.forum.attribute('adminUrl'),\n            target: '_self',\n            external: true,\n          },\n          app.translator.trans('core.forum.header.admin_button')\n        )\n      );\n    }\n  });\n\n  addShareButtons();\n  addPushNotifications();\n});\n"],"names":["_typeof","require","_regeneratorRuntime","module","exports","__esModule","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","method","arg","Error","undefined","done","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","fn","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","invoke","resolve","reject","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","doneResult","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","d","a","definition","o","get","prop","r","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","arguments","apply","flarum","core","compat","_extends","assign","bind","target","source","idbProxyableTypes","cursorAdvanceMethods","cursorRequestMap","WeakMap","transactionDoneMap","transactionStoreNamesMap","transformCache","reverseTransformCache","idbProxyTraps","receiver","IDBTransaction","objectStoreNames","objectStore","set","has","transformCachableValue","func","IDBDatabase","transaction","IDBCursor","advance","continuePrimaryKey","includes","unwrap","storeNames","tx","sort","unlisten","removeEventListener","DOMException","addEventListener","cacheDonePromiseForTransaction","IDBObjectStore","IDBIndex","some","c","Proxy","IDBRequest","request","promise","success","newValue","openDB","version","blocked","upgrade","blocking","terminated","indexedDB","open","openPromise","event","oldVersion","newVersion","db","oldTraps","readMethods","writeMethods","cachedMethods","Map","getMethod","targetFuncName","replace","useIndex","isWrite","storeName","store","index","shift","all","shareContent","data","title","extractText","navigator","share","url","resultPara","textContent","console","log","subscribeUser","save","app","userVisibleOnly","applicationServerKey","subscription","body","pushEnabled","String","startsWith","endsWith","refreshSubscription","sw","window","Notification","permission","pushManager","getSubscription","s","unsubscribe","pushConfigured","extend","Page","basePath","trimRight","registerSW","dbPromise","createObjectStore","put","serviceWorker","register","scope","ready","SessionDropdown","items","matchMedia","matches","standalone","document","referrer","LinkButton","icon","href","external","DiscussionControls","discussion","add","Button","onclick","location","protocol","hostname","PostControls","post","username","user","UserControls","dismissAlert","localStorage","setItem","JSON","stringify","timestamp","Date","getTime","getItem","controls","class","ondismiss","NotificationGrid","label","SettingsPage","Alert","itemClassName","dismissible","className","requestPermission","res","m","redraw"],"sourceRoot":""}